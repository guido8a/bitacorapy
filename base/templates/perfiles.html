{% extends "base_inicio.html" %}

{% load static %}

{% block content %}

        <div style="text-align: center; width: 100%; margin-left: 35%; margin-top: 20%">
            <form name="frmLogin" class="form-signin well" role="form" style="width: 300px;">
                <h2 class="text-center">Perfil</h2>
                <select name="somename">
                    {% for prfl in perfiles %}
                        <option value="{{ prfl.id }}"> {{ prfl.dscr }} </option>
                    {% endfor %}
                </select>
                <select name="prfl" class="form-control" from="${perfilesUsr}" optionKey="id" optionValue="perfil"/>
                <div class="divBtn">
                    <a href="#" class="btn btn-primary btn-lg btn-block btn-login" style="width: 140px; margin: auto">
                        <i class="fa fa-lock"></i> Entrar
                    </a>
                </div>
            </form>
        </div>
    <div id="cargando" class="text-center hidden">
        <img src="${resource(dir: 'images', file: 'spinner32.gif')}" alt='Cargando...' width="32px" height="32px"/>
    </div>

        <script type="text/javascript">
            var $frm = $("#frmLogin");
            function doLogin() {
                if ($frm.valid()) {
                    $("#cargando").removeClass('hidden');
                    $(".btn-login").replaceWith($("#cargando"));
                    $("#frmLogin").submit();
                }
            }
            $(function () {
                $frm.validate();
                $(".btn-login").click(function () {
                    doLogin();
                });
                $("input").keyup(function (ev) {
                    if (ev.keyCode == 13) {
                        doLogin();
                    }
                })
            });
        </script>

{% endblock content %}